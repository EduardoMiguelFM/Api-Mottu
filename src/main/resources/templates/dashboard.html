<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
  <head th:replace="~{fragments/header :: head}">
    <title>Dashboard - MotoVision</title>
  </head>
  <body>
    <div th:replace="~{fragments/header :: navbar}"></div>

    <div class="container-fluid">
      <div class="row">
        <div
          class="col-md-2 p-0"
          th:replace="~{fragments/menu :: sidebar}"
        ></div>
        <div class="col-md-10">
          <main class="p-4">
            <!-- Mensagens -->
            <div
              th:if="${success}"
              class="alert alert-success alert-dismissible fade show"
              role="alert"
            >
              <i class="fas fa-check-circle me-2"></i>
              <span th:text="${success}"></span>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="alert"
              ></button>
            </div>

            <div
              th:if="${error}"
              class="alert alert-danger alert-dismissible fade show"
              role="alert"
            >
              <i class="fas fa-exclamation-circle me-2"></i>
              <span th:text="${error}"></span>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="alert"
              ></button>
            </div>

            <!-- Header do Dashboard -->
            <div class="d-flex justify-content-between align-items-center mb-4">
              <div>
                <h1 class="h3 mb-0">
                  <i class="fas fa-tachometer-alt me-2 text-primary"></i
                  >Dashboard
                </h1>
                <p class="text-muted">
                  Bem-vindo ao sistema MotoVision,
                  <span th:text="${usuario?.nome ?: 'Usuário'}">Usuário</span>!
                </p>
              </div>
              <div class="text-end">
                <span
                  class="badge bg-primary fs-6"
                  th:text="${usuario?.role?.descricao ?: 'Usuário'}"
                  >Usuário</span
                >
              </div>
            </div>

            <!-- Cards de Estatísticas -->
            <div class="row mb-4">
              <div class="col-md-3 mb-3">
                <div class="card bg-primary text-white">
                  <div class="card-body">
                    <div class="d-flex justify-content-between">
                      <div>
                        <h4 class="card-title">Total de Motos</h4>
                        <h2 class="mb-0" th:text="${totalMotos}">0</h2>
                      </div>
                      <div class="align-self-center">
                        <i class="fas fa-motorcycle fa-2x"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-3 mb-3">
                <div class="card bg-success text-white">
                  <div class="card-body">
                    <div class="d-flex justify-content-between">
                      <div>
                        <h4 class="card-title">Disponíveis</h4>
                        <h2 class="mb-0" th:text="${disponiveis}">0</h2>
                      </div>
                      <div class="align-self-center">
                        <i class="fas fa-check-circle fa-2x"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-3 mb-3">
                <div class="card bg-warning text-white">
                  <div class="card-body">
                    <div class="d-flex justify-content-between">
                      <div>
                        <h4 class="card-title">Em Manutenção</h4>
                        <h2 class="mb-0" th:text="${manutencao}">0</h2>
                      </div>
                      <div class="align-self-center">
                        <i class="fas fa-tools fa-2x"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-3 mb-3">
                <div class="card bg-info text-white">
                  <div class="card-body">
                    <div class="d-flex justify-content-between">
                      <div>
                        <h4 class="card-title">Pátios</h4>
                        <h2 class="mb-0" th:text="${totalPatios}">0</h2>
                      </div>
                      <div class="align-self-center">
                        <i class="fas fa-warehouse fa-2x"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Ações Rápidas -->
            <div class="row">
              <div class="col-md-6">
                <div class="card">
                  <div class="card-header">
                    <h5 class="card-title mb-0">
                      <i class="fas fa-bolt me-2"></i>Ações Rápidas
                    </h5>
                  </div>
                  <div class="card-body">
                    <div class="d-grid gap-2">
                      <a href="/motos" class="btn btn-outline-primary">
                        <i class="fas fa-motorcycle me-2"></i>Gerenciar Motos
                      </a>
                      <a href="/patios" class="btn btn-outline-success">
                        <i class="fas fa-warehouse me-2"></i>Gerenciar Pátios
                      </a>
                      <a href="/motos/novo" class="btn btn-outline-info">
                        <i class="fas fa-plus me-2"></i>Cadastrar Nova Moto
                      </a>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-6">
                <div class="card">
                  <div class="card-header">
                    <h5 class="card-title mb-0">
                      <i class="fas fa-chart-pie me-2"></i>Status por Setor
                    </h5>
                  </div>
                  <div class="card-body">
                    <div class="row text-center">
                      <div class="col-6 mb-3">
                        <div class="border rounded p-2">
                          <div class="text-success fw-bold">Setor A</div>
                          <div class="text-muted">Disponíveis</div>
                          <div class="h4 text-success" th:text="${setorA}">
                            0
                          </div>
                        </div>
                      </div>
                      <div class="col-6 mb-3">
                        <div class="border rounded p-2">
                          <div class="text-primary fw-bold">Setor B</div>
                          <div class="text-muted">Reservadas</div>
                          <div class="h4 text-primary" th:text="${setorB}">
                            0
                          </div>
                        </div>
                      </div>
                      <div class="col-6 mb-3">
                        <div class="border rounded p-2">
                          <div class="text-warning fw-bold">Setor C</div>
                          <div class="text-muted">Manutenção</div>
                          <div class="h4 text-warning" th:text="${setorC}">
                            0
                          </div>
                        </div>
                      </div>
                      <div class="col-6 mb-3">
                        <div class="border rounded p-2">
                          <div class="text-danger fw-bold">Setor F</div>
                          <div class="text-muted">Danos</div>
                          <div class="h4 text-danger" th:text="${setorF}">
                            0
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Seção de Motos e Pátios Recentes -->
            <div class="row mb-4">
              <div class="col-md-6">
                <div class="card">
                  <div class="card-header">
                    <h5 class="card-title mb-0">
                      <i class="fas fa-motorcycle me-2"></i>Motos Recentes
                    </h5>
                  </div>
                  <div class="card-body">
                    <div
                      th:if="${#lists.isEmpty(motosRecentes)}"
                      class="text-center text-muted"
                    >
                      <i class="fas fa-info-circle me-2"></i>
                      Nenhuma moto cadastrada ainda.
                    </div>
                    <div
                      th:unless="${#lists.isEmpty(motosRecentes)}"
                      class="list-group list-group-flush"
                    >
                      <div
                        th:each="moto : ${motosRecentes}"
                        class="list-group-item d-flex justify-content-between align-items-center"
                      >
                        <div>
                          <strong th:text="${moto.placa}">ABC-1234</strong>
                          <br />
                          <small class="text-muted" th:text="${moto.modelo}"
                            >Modelo</small
                          >
                        </div>
                        <span class="badge bg-primary" th:text="${moto.status}"
                          >DISPONIVEL</span
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-6">
                <div class="card">
                  <div class="card-header">
                    <h5 class="card-title mb-0">
                      <i class="fas fa-warehouse me-2"></i>Pátios Ativos
                    </h5>
                  </div>
                  <div class="card-body">
                    <div
                      th:if="${#lists.isEmpty(patiosRecentes)}"
                      class="text-center text-muted"
                    >
                      <i class="fas fa-info-circle me-2"></i>
                      Nenhum pátio cadastrado ainda.
                    </div>
                    <div
                      th:unless="${#lists.isEmpty(patiosRecentes)}"
                      class="list-group list-group-flush"
                    >
                      <div
                        th:each="patio : ${patiosRecentes}"
                        class="list-group-item d-flex justify-content-between align-items-center"
                      >
                        <div>
                          <strong th:text="${patio.nome}">Nome do Pátio</strong>
                          <br />
                          <small class="text-muted" th:text="${patio.endereco}"
                            >Endereço</small
                          >
                        </div>
                        <span class="badge bg-success">Ativo</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </main>
        </div>
      </div>
    </div>

    <div th:replace="~{fragments/footer :: footer}"></div>
  </body>
</html>
